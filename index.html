<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Adventure Trakker</title>

  <!-- Leaflet (map) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    :root{
      --header-color: rgba(180, 180, 180, 0.92);
      --glass-bg: rgba(255, 255, 255, 0.18);
      --glass-bg-strong: rgba(255, 255, 255, 0.28);
      --glass-border: rgba(255, 255, 255, 0.22);
      --text-soft: rgba(245, 245, 245, 0.88);
      --text-dim: rgba(245, 245, 245, 0.70);
      --shadow: 0 14px 30px rgba(0,0,0,0.25);
    }

    html, body{
      height:100%;
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#0b0b0b;
      overflow:hidden;
    }

    /* Full-screen map */
    #map{
      position:fixed;
      inset:0;
      z-index:0;
    }

    /* Dim/soften the map because it's "background" */
    .map-dimmer{
      position:fixed;
      inset:0;
      z-index:1;
      background: rgba(0,0,0,0.35);
      pointer-events:none;
    }

    /* Subtle vignette to make header/buttons pop */
    .vignette{
      position:fixed;
      inset:-40px;
      z-index:2;
      pointer-events:none;
      background:
        radial-gradient(ellipse at center, rgba(0,0,0,0.0) 0%, rgba(0,0,0,0.35) 70%, rgba(0,0,0,0.55) 100%);
      mix-blend-mode: multiply;
    }

    /* UI overlay container */
    .ui{
      position:fixed;
      inset:0;
      z-index:3;
      display:flex;
      flex-direction:column;
      pointer-events:none; /* map is interactable unless a panel/button needs clicks */
    }

    /* Header */
    .header{
      pointer-events:none;
      padding: 34px 18px 0;
      text-align:center;
      user-select:none;
    }
    .header h1{
      margin:0;
      font-weight: 300; /* not bold */
      letter-spacing: 0.06em;
      color: var(--header-color);
      font-size: clamp(40px, 6vw, 72px);
      text-shadow: 0 10px 26px rgba(0,0,0,0.35);
    }

    /* Right panel area */
    .right-panel-wrap{
      position: fixed;
      top: 110px;
      right: 18px;
      bottom: 90px; /* leave space for bottom buttons */
      width: min(360px, 92vw);
      z-index: 4;
      pointer-events: auto;
    }

    .right-panel{
      height: 100%;
      background: var(--glass-bg-strong); /* more opaque than background */
      border: 1px solid var(--glass-border);
      border-radius: 18px;
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      overflow: hidden;
      display:flex;
      flex-direction:column;
    }

    .rp-head{
      padding: 14px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,0.14);
      user-select:none;
    }
    .rp-head h2{
      margin:0;
      font-size: 16px;
      font-weight: 300; /* not too bold */
      letter-spacing: 0.04em;
      color: var(--text-soft);
    }
    .rp-head .sub{
      margin-top: 6px;
      font-size: 12px;
      color: var(--text-dim);
      opacity: 0.95;
    }

    .rp-body{
      padding: 12px 12px 14px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      overflow:auto;
    }

    .trip-card{
      border-radius: 14px;
      background: rgba(0,0,0,0.28);
      border: 1px solid rgba(255,255,255,0.12);
      padding: 10px 10px 10px;
      display:flex;
      flex-direction:column;
      gap: 6px;
    }
    .trip-title{
      font-size: 14px;
      font-weight: 300;
      color: rgba(255,255,255,0.92);
      letter-spacing: 0.02em;
    }
    .trip-date{
      font-size: 12px;
      color: rgba(255,255,255,0.75);
    }
    .trip-snippet{
      font-size: 12px;
      color: rgba(255,255,255,0.70);
      line-height: 1.35;
    }

    /* Bottom floating buttons */
    .bottom-actions{
      margin-top:auto;
      padding: 0 18px 26px;
      display:flex;
      justify-content:center;
      pointer-events:none;
    }

    .action-shell{
      pointer-events:auto;
      display:flex;
      gap:12px;
      padding: 12px;
      border-radius: 18px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }

    button{
      appearance:none;
      border:none;
      border-radius: 14px;
      padding: 12px 16px;
      font-size: 14px;
      cursor:pointer;
      transition: transform 120ms ease, opacity 120ms ease;
      color: rgba(245,245,245,0.95);
      background: rgba(20,20,20,0.55);
      border: 1px solid rgba(255,255,255,0.14);
    }
    button:hover{ transform: translateY(-1px); }
    button:active{ transform: translateY(0px); opacity: 0.9; }

    .primary{
      background: rgba(245,245,245,0.14);
    }

    /* Responsive tweaks */
    @media (max-width: 900px){
      .right-panel-wrap{
        top: 120px;
        right: 12px;
        width: min(320px, 92vw);
      }
    }

    @media (max-width: 620px){
      /* On small screens, make the panel a compact "sheet" */
      .right-panel-wrap{
        left: 12px;
        right: 12px;
        top: auto;
        bottom: 92px;
        height: 220px;
        width: auto;
      }
      .right-panel{ border-radius: 16px; }
      .bottom-actions{ padding-bottom: 18px; }
      .action-shell{ width: min(520px, 100%); }
      button{ flex:1; }
    }
  </style>
</head>

<body>
  <div id="map"></div>
  <div class="map-dimmer"></div>
  <div class="vignette"></div>

  <!-- Right panel -->
  <div class="right-panel-wrap">
    <div class="right-panel">
      <div class="rp-head">
        <h2>Upcoming trips</h2>
        <div class="sub">Next 3 adventures (dates + quick notes)</div>
      </div>
      <div class="rp-body" id="upcomingList">
        <!-- injected by JS -->
      </div>
    </div>
  </div>

  <div class="ui">
    <div class="header">
      <h1>Adventure Trakker</h1>
    </div>

    <div class="bottom-actions">
      <div class="action-shell">
        <button id="viewTripsBtn" class="primary">View Trips</button>
        <button id="addTripBtn">Add Trip</button>
      </div>
    </div>
  </div>

  <script>
    // ---- Map (background only for now) ----
    const map = L.map('map', {
      zoomControl: false,
      attributionControl: true
    });

    // OSM tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // Fit roughly to USA/Canada/Mexico
    const northAmericaBounds = L.latLngBounds(
      L.latLng(14, -118),
      L.latLng(58, -52)
    );
    map.fitBounds(northAmericaBounds);

    // Optional: disable scroll zoom on landing page
    map.scrollWheelZoom.disable();

    // ---- Upcoming trips (placeholder data for now) ----
    // Later weâ€™ll replace this with real trips from local storage / Supabase.
    const upcomingTrips = [
      { title: "Smoky Mountains Weekend", date: "2026-02-06", snippet: "Cabin stay + 2 hikes + one BBQ stop." },
      { title: "Chicago Food Run",        date: "2026-03-14", snippet: "Deep dish, museums, and a skyline night walk." },
      { title: "Niagara + Toronto",       date: "2026-05-01", snippet: "Falls, CN Tower, and a day trip to wineries." },
    ];

    function formatDate(iso){
      // Keep simple (we can upgrade to nicer formatting later)
      const d = new Date(iso + "T00:00:00");
      return d.toLocaleDateString(undefined, { year: "numeric", month: "short", day: "numeric" });
    }

    function renderUpcoming(){
      const el = document.getElementById("upcomingList");
      el.innerHTML = "";

      upcomingTrips.slice(0,3).forEach(t => {
        const card = document.createElement("div");
        card.className = "trip-card";
        card.innerHTML = `
          <div class="trip-title">${escapeHtml(t.title)}</div>
          <div class="trip-date">${formatDate(t.date)}</div>
          <div class="trip-snippet">${escapeHtml(t.snippet || "")}</div>
        `;
        el.appendChild(card);
      });
    }

    function escapeHtml(s) {
      return String(s).replace(/[&<>"']/g, (c) => ({
        "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;"
      }[c]));
    }

    renderUpcoming();

    // ---- Buttons (stubs for now) ----
    document.getElementById('viewTripsBtn').addEventListener('click', () => {
      alert('View Trips (coming next)');
      // later: window.location.href = "trips.html";
    });

    document.getElementById('addTripBtn').addEventListener('click', () => {
      alert('Add Trip (coming next)');
      // later: open modal, or navigate to add-trip page
    });
  </script>
</body>
</html>
