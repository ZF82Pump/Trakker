<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Debt Payoff Tracker</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    padding: 20px;
    max-width: 1000px;
    margin: auto;
}
h1 { text-align: center; }
.card {
    background: white;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
input, select, button {
    padding: 8px;
    margin: 5px 0;
    width: 100%;
}
button {
    cursor: pointer;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
}
button.edit { background: #28a745; }
button.delete { background: #dc3545; }
.debt {
    border-bottom: 1px solid #ddd;
    padding: 10px 0;
}
.row { display: flex; gap: 10px; }
.summary { font-weight: bold; }
.slider-value { color: #007bff; font-weight: bold; }
</style>
</head>

<body>

<h1>Debt Payoff Tracker</h1>

<div class="card">
    <h3 id="formTitle">Add Debt</h3>
    <input id="debtName" placeholder="Debt Name">
    <input id="balance" type="number" placeholder="Balance">
    <input id="rate" type="number" placeholder="Interest Rate (%)">
    <input id="payment" type="number" placeholder="Minimum Monthly Payment">
    <button onclick="saveDebt()">Save Debt</button>
</div>

<div class="card">
    <h3>Strategy & What-If</h3>
    <select id="strategy" onchange="render()">
        <option value="snowball">Snowball (Lowest Balance)</option>
        <option value="avalanche">Avalanche (Highest Interest)</option>
    </select>

    <input id="totalPayment" type="number" placeholder="Base Total Monthly Payment">

    <label>
        Extra Monthly Payment:
        <span class="slider-value">$<span id="extraValue">0</span></span>
    </label>
    <input type="range" id="extraSlider" min="0" max="2000" step="25" value="0"
           oninput="updateExtra()">
</div>

<div class="card">
    <h3>Saved Debts</h3>
    <div id="debtList"></div>
</div>

<div class="card summary">
    <p>Total Debt: $<span id="totalDebt">0</span></p>
    <p>Debt-Free Date: <span id="debtFreeDate">N/A</span></p>
    <p>Months Saved: <span id="monthsSaved">0</span></p>
    <p>Interest Saved: $<span id="interestSaved">0</span></p>
</div>

<script>
let debts = [];
let editIndex = null;
let baseline = null;

function saveDebt() {
    const debt = {
        name: debtName.value.trim(),
        balance: +balance.value,
        rate: +rate.value || 0,
        payment: +payment.value
    };

    if (!debt.name || debt.balance <= 0 || debt.payment <= 0) return;

    if (editIndex !== null) {
        debts[editIndex] = debt;
        editIndex = null;
        document.getElementById("formTitle").textContent = "Add Debt";
    } else {
        debts.push(debt);
    }

    debtName.value = balance.value = rate.value = payment.value = "";
    baseline = null;
    render();
}

function editDebt(i) {
    const d = debts[i];
    debtName.value = d.name;
    balance.value = d.balance;
    rate.value = d.rate;
    payment.value = d.payment;
    editIndex = i;
    document.getElementById("formTitle").textContent = "Edit Debt";
}

function deleteDebt(i) {
    debts.splice(i, 1);
    baseline = null;
    render();
}

function simulate(extra = 0) {
    let copy = debts.map(d => ({ ...d }));
    let months = 0, interest = 0;
    let totalPay = (+totalPayment.value || 0) + extra;

    while (copy.some(d => d.balance > 0) && months < 1200) {
        months++;

        copy.forEach(d => {
            if (d.balance > 0) {
                let i = d.balance * (d.rate / 100 / 12);
                d.balance += i;
                interest += i;
            }
        });

        let minTotal = copy.reduce((s, d) => s + (d.balance > 0 ? d.payment : 0), 0);
        let extraPay = Math.max(0, totalPay - minTotal);

        let order = copy.filter(d => d.balance > 0);
        strategy.value === "snowball"
            ? order.sort((a,b) => a.balance - b.balance)
            : order.sort((a,b) => b.rate - a.rate);

        order.forEach(d => {
            let pay = Math.min(d.balance, d.payment + extraPay);
            d.balance -= pay;
            extraPay -= Math.max(0, pay - d.payment);
        });
    }
    return { months, interest };
}

function updateExtra() {
    extraValue.textContent = extraSlider.value;
    render();
}

function render() {
    debtList.innerHTML = "";
    let total = 0;

    debts.forEach((d, i) => {
        total += d.balance;
        debtList.innerHTML += `
            <div class="debt">
                <strong>${d.name}</strong><br>
                Balance: $${d.balance.toFixed(2)}<br>
                Rate: ${d.rate}%<br>
                Min Payment: $${d.payment.toFixed(2)}
                <div class="row">
                    <button class="edit" onclick="editDebt(${i})">Edit</button>
                    <button class="delete" onclick="deleteDebt(${i})">Delete</button>
                </div>
            </div>
        `;
    });

    totalDebt.textContent = total.toFixed(2);

    if (!baseline && totalPayment.value) baseline = simulate(0);

    let result = simulate(+extraSlider.value);

    if (baseline) {
        monthsSaved.textContent = Math.max(0, baseline.months - result.months);
        interestSaved.textContent = (baseline.interest - result.interest).toFixed(2);
    }

    if (result.months) {
        let d = new Date();
        d.setMonth(d.getMonth() + result.months);
        debtFreeDate.textContent = d.toLocaleDateString();
    } else {
        debtFreeDate.textContent = "N/A";
    }
}
</script>

</body>
</html>
